{% extends layout %}
{% load resource_extras %}
{% block favicon %}{{ item.item_type|icon_url:16 }}{% endblock %}
{% block title %}<img src="{{ item.item_type|icon_url:48 }}" /> {% ifagentcan 'view' 'name' item %}{{ item.name }}{% else %}[PERMISSION DENIED]{% endifagentcan %}{% endblock %}
{% block content %}

{% itemheader %}

<table width="100%" style="margin-bottom: 15px;">

<tr valign="top">
    <td style="font-size: larger;">Roster</td>
    <td style="font-size: larger;">Folio</td>
</tr>

<tr valign="top">
<td>

<div>
    {% if item.group_memberships_as_group.all %}
    <table class="list">
        <tr>
            <th>Name</th>
            <th>Membership</th>
        </tr>
        {% for agent_relationship in item.group_memberships_as_group.all %}
        <tr class="{% cycle 'even' 'odd' %}">
            {% ifagentcan 'view' 'name' agent_relationship.agent %}
            <td><a href="{% show_resource_url agent_relationship.agent %}">{{ agent_relationship.agent.name }}</a></td>
            {% else %}
            <td><a href="{% show_resource_url agent_relationship.agent %}">[PERMISSION DENIED]</a></td>
            {% endifagentcan %}
            <td><a href="{% show_resource_url agent_relationship %}">{{ agent_relationship.pk }}</a></td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        No Agents In This Group
    {% endif %}

    <div style="margin-top: 10px;">
        <a href="/resource/groupmembership/new?group={{ item.pk }}&redirect={{ full_path|urlencode }}">[+] Add Agent</a>
    </div>
</div>

</td>

<td>

    {% embed item.folios_as_group.get %}
    {# {{ folio_html }} #}

</td>
</tr>

</table>

{% commentbox %}

{% endblock content %}

