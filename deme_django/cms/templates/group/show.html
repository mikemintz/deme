{% extends layout %}
{% load item_tags %}
{% comment %}{% block title-section %}{% endblock %}{% endcomment %}

{% block content %}
<div class="group-profile container">
  <div class="header">
    <div class="thumb" style="background-image:url('{% if item.image %}{% ifagentcan 'view Group.image' item %}{% ifagentcan 'view FileDocument.datafile' item.image %}{{ item.image.datafile.url }}{% endifagentcan %}{% endifagentcan %}{% else %}{{ item.actual_item_type|icon_url:128 }}{% endif %}')">
  	</div>
  	<div class="details">
  	 {% ifagentcan 'view Item.description' item %}
   	 <p>{{ item.description }}</p>
  	 {% endifagentcan %}
  	</div>
  </div>

  <div class="members row">
  {% for member in members %}
    <div id="member{{ member.item.pk }}" class="member col">
      <a href="{{ member.item.get_absolute_url }}">
      <div class="thumb profile-pic"
        {% if member.photo %}{% ifagentcan 'view Agent.photo' member.item %}
      {% ifagentcan 'view FileDocument.datafile' member.photo %} style="background-image: url('{{ member.photo.datafile.url }}')"{% endifagentcan %}{% endifagentcan %}{% endif %}
      ></div>
      </a>
      <p class="name"><a href="{{ member.item.get_absolute_url }}">{% viewable_name member.item %}</a></p>
    </div>
  {% endfor %}
  </div>

  <div class="pagination row">
    <div class="col col-lg-12">
    {% if members.has_previous %}
    <a href="?page={{ members.previous_page_number }}">Prev |</a>
    {% endif %}
    {% if page_range|length > 1 %}
        {% for page in page_range %}
            {% ifequal page members.number %}
                {{ members.number }}
            {% endifequal %}

            {% ifnotequal page members.number %}
                <a href="?page={{ page }}">{{ page }}</a>
            {% endifnotequal %}
        {% endfor %}
    {% endif %}
    {% if members.has_next %}
    <a href="?page={{ members.next_page_number }}">| Next</a>
    {% endif %}
    </div>
  </div>

  <p><a href="#" class="viewall btn btn-default" data-target=".collection-view"><i class="glyphicon glyphicon-th"></i> View as Collection</a></p>
  <div class="collection-view hide">
    <div class="panel">
      <h3 class="panel-heading">Collection View</h3>
      {% embed 'collection' item %}
    </div>
  </div>

  <!--
  <div style="font-size: larger; margin-left: 58% "><a>All</a><a style="margin-left:1em">Individuals</a> <a style="margin-left:1em;">Subgroups </a></div>
  -->

  {% if folio %}
  <div class="folio">
    <p><a href="{{ folio.get_absolute_url }}" class="viewall btn btn-default" data-target=".group-folio-view"><i class="glyphicon glyphicon-folder-open"></i> View Group Folio</a></p>
    <div class="group-folio-view">
      <div class="panel">
        <h3 class="panel-heading">Group Folio</h3>
        {% embed 'folio' folio %}
      </div>
    </div>
  </div>
  {% endif %}

</div>
<script>
$(function(){
  $('.viewall').click(function(e){
    e.preventDefault();
    var target = $(this).attr('data-target');
    $(target).toggleClass('hide');
    $(window).trigger('resize'); // to properly size any jqgrids
  });
});
</script>
{% endblock content %}

