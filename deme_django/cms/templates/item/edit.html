{% extends layout %}
{% load resource_extras %}
{% block favicon %}{{ item.item_type|icon_url:16 }}{% endblock %}
{% block title %}<img src="{{ item.item_type|icon_url:48 }}" /> Edit {% ifagentcan 'view' 'name' item %}{{ item.name }}{% else %}[PERMISSION DENIED]{% endifagentcan %}{% endblock %}
{% block content %}

<script type="text/javascript" src="/static/javascripts/prototype.js"></script>
<script type="text/javascript" src="/static/javascripts/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
  {% ifequal item_type "HtmlDocument" %}
  mode: "textareas",
  theme: "simple"
  {% else %}
  {% endifequal %}
});
</script>    

<div class="crumbs">
    {% for inherited_item_type in item_type_inheritance %}
    <a href="{% url resource_collection viewer=inherited_item_type|lower %}">{{ inherited_item_type }}s</a>
    &raquo;
    {% endfor %}
    <a href="{% show_resource_url item %}">{% ifagentcan 'view' 'name' item %}{{ item.name }}{% else %}[PERMISSION DENIED]{% endifagentcan %}</a>
    &raquo;
    <a href="{% show_resource_url item item.version_number %}">Version {{ item.version_number }}</a>
    &raquo;
    Edit
</div>

<div>
    <form method="post" enctype="multipart/form-data" action="{% url resource_entry viewer=item_type|lower,noun=item.pk,entry_action="update" %}?version={{ item.version_number }}" class="item_form">
        <table>
            {{ form.as_table }}
        </table>
    <input type="submit" />
    </form>
</div>

{% endblock content %}

