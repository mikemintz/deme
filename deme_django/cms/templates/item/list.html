{% extends layout %}
{% load item_tags %}
{% block content %}

<div style="border: thin solid #aaa; background: #eee; padding: 10px; margin-bottom: 10px;">
<form method="get" name="list_filter_form">
<table cellspacing="0" class="twocol">
    <tr>
        <th>
            Item Type Filter:
        </th>
        <td>
            {% for item_type in item_types %}
            <span>[
            {% ifequal item_type.item_type accepted_item_type %}
            <b>{{ item_type.name_plural|capfirst }}</b>
            {% else %}
            <a href="{% url item_type_url viewer=item_type.viewer %}">{{ item_type.name_plural|capfirst }}</a>
            {% endifequal %}
            ]</span>
            {% endfor %}
        </td>
    </tr>
    <tr>
        <th>
            Collection Filter:
        </th>
        <td>
            <select name="collection">
                {% if collection %}
                <option value=""></option>
                {% else %}
                <option value="" selected="selected"></option>
                {% endif %}
                {% for other_collection in all_collections %}
                {% ifequal other_collection.pk collection.pk %}
                <option value="{{ other_collection.pk }}" selected="selected">{% viewable_name other_collection %}</option>
                {% else %}
                <option value="{{ other_collection.pk }}">{% viewable_name other_collection %}</option>
                {% endifequal %}
                {% endfor %}
            </select>
        </td>
    </tr>
    <tr>
        <th>
            Search:
        </th>
        <td>
            <input type="text" name="q" value="{{ search_query }}" />
        </td>
    </tr>
</table>
</form>
</div>

{% ifagentcanglobal item_create_ability %}
    <a class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" href="{% url item_type_url viewer=item_type_lower,action="new" %}">Create a new {{ item_type_lower }}</a>
    <br>
{% endifagentcanglobal %}

{% if items %}

<div style="text-align: right; font-size: smaller;">
    Displaying {{ list_start_i }} - {{ list_end_i }} of {{ n_listable_items }} listable {{ accepted_item_type_name_plural }}
</div>

<div style="margin-top: 10px; margin-bottom: 10px; text-align: center;">
    {% list_results_navigator 10 %}
</div>

<table cellspacing="0" class="list" width="100%">
    <tr>
        <th>Name</th>
    </tr>
    {% for item in items %}
    <tr class="{% cycle 'even' 'odd' %}">
        <td><a class="img_link" href="{{ item.get_absolute_url }}?crumb_item_type={{ item_type_lower }}&crumb_filter={{ filter_string }}"><img src="{{ item|icon_url:16 }}" /><span>{% viewable_name item %}</span></a></td>
    </tr>
    {% endfor %}
</table>
{% else %}
    No {{ accepted_item_type_name_plural }} Found
{% endif %}

<div style="margin-top: 10px; text-align: center;">
    {% list_results_navigator 10 %}
</div>

{% endblock content %}

