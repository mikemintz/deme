{% extends layout %}
{% load resource_extras %}
{% block favicon %}{{ item_type|icon_url:16 }}{% endblock %}
{% block title %}<img src="{{ item_type|icon_url:48 }}" /> List {{ item_type }}s{% endblock %}
{% block content %}

<div class="crumbs">
    <div style="float: right;">
        [+] <a href="/resource/{{ item_type|lower }}/new">New {{ item_type }}</a>
    </div>
    {% for inherited_item_type in item_type_inheritance %}
    {% ifequal inherited_item_type item_type %}
    {{ inherited_item_type }}s
    {% else %}
    <a href="/resource/{{ inherited_item_type|lower }}">{{ inherited_item_type }}s</a>
    &raquo;
    {% endifequal %}
    {% endfor %}
</div>

<form method="get">
<table class="twocol">
    <tr>
        <th>
            Item Type Filter:
        </th>
        <td>
            <select onchange="window.location = this.value;">
                {% for model_name in model_names %}
                {% ifequal model_name item_type %}
                <option value="/resource/{{ model_name|lower }}" selected="selected">{{ model_name }}</option>
                {% else %}
                <option value="/resource/{{ model_name|lower }}">{{ model_name }}</option>
                {% endifequal %}
                {% endfor %}
            </select>
        </td>
    </tr>
    <tr>
        <th>
            Item Set Filter:
        </th>
        <td>
            <select onchange="window.location = this.value;">
                {% if itemset %}
                <option value="/resource/{{ item_type|lower }}"></option>
                {% else %}
                <option value="/resource/{{ item_type|lower }}" selected="selected"></option>
                {% endif %}
                {% for other_itemset in all_itemsets %}
                {% ifequal other_itemset.pk itemset.pk %}
                <option value="/resource/{{ item_type|lower }}?itemset={{ other_itemset.pk }}" selected="selected">{{ other_itemset.name }}</option>
                {% else %}
                <option value="/resource/{{ item_type|lower }}?itemset={{ other_itemset.pk }}">{{ other_itemset.name }}</option>
                {% endifequal %}
                {% endfor %}
            </select>
        </td>
    </tr>
    <tr>
        <th>
            Search:
        </th>
        <td>
            <input type="text" name="q" value="{{ search_query }}" />
        </td>
    </tr>
</table>
</form>

{% if items %}

<div>
    Displaying {{ list_start_i }} - {{ list_end_i }} of {{ n_listable_items }} listable items (plus {{ n_opposite_trashed_items }} opposite-trashed items and {{ n_unlistable_items }} unlistable items)
</div>

<div>
    {% list_results_navigator item_type itemset search_query trashed offset limit n_listable_items 10 %}
</div>

<table class="list">
    <tr>
        <th>Name</th>
    </tr>
    {% for item in items %}
    <tr class="{% cycle 'even' 'odd' %}">
        <td><img src="{{ item.item_type|icon_url:16 }}" /> <a href="/resource/{{ item.item_type|lower }}/{{ item.pk }}">{{ item }}</a></td>
    </tr>
    {% endfor %}
</table>
{% else %}
    No {{ item_type }}s Found
{% endif %}

{% endblock content %}

