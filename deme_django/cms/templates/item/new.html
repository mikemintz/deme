{% extends layout %}
{% load resource_extras %}
{% block favicon %}{{ item_type|icon_url:16 }}{% endblock %}
{% block title %}<img src="{{ item_type|icon_url:48 }}" /> {% if action_is_entry_copy %}Copy{% else %}New{% endif %} {{ item_type }}{% endblock %}
{% block content %}

<script type="text/javascript" src="/static/javascripts/prototype.js"></script>
<script type="text/javascript" src="/static/javascripts/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
  {% ifequal item_type "HtmlDocument" %}
  mode: "textareas",
  theme: "simple"
  {% else %}
  {% endifequal %}
});
</script>    

<div class="crumbs">
    {% for inherited_item_type in item_type_inheritance %}
    <a href="{% url resource_collection viewer=inherited_item_type|lower %}">{{ inherited_item_type }}s</a>
    &raquo;
    {% endfor %}
    {% if action_is_entry_copy %}Copy{% else %}New{% endif %}
</div>

<div>
    {% if redirect %}
    <form method="post" enctype="multipart/form-data" action="{% url resource_collection viewer=item_type|lower,collection_action="create" %}?redirect={{ redirect|urlencode }}" class="item_form">
    {% else %}
    <form method="post" enctype="multipart/form-data" action="{% url resource_collection viewer=item_type|lower,collection_action="create" %}" class="item_form">
    {% endif %}
        <table>
            <tr>
                <th>
                    <label for="id_item_type">Item Type:</label>
                </th>
                <td>
                    <select id="id_item_type" name="item_type" onchange="window.location = this.value;">
                        {% for model_name in model_names %}
                        {% if action_is_entry_copy %}
                        <option value="{% url resource_entry viewer=model_name|lower,noun=item.pk,entry_action="copy" %}?version={{ item.version_number }}"{% ifequal model_name item_type %} selected="selected"{% endifequal %}>{{ model_name }}</option>
                        {% else %}
                        <option value="{% url resource_collection viewer=model_name|lower,collection_action="new" %}"{% ifequal model_name item_type %} selected="selected"{% endifequal %}>{{ model_name }}</option>
                        {% endif %}
                        {% endfor %}
                    </select>
                </td>
            </tr>
            {{ form.as_table }}
        </table>
        <input type="submit" />
    </form>
</div>

{% endblock content %}

