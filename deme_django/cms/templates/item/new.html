{% extends layout %}
{% load resource_extras %}
{% block favicon %}{{ item_type|icon_url:16 }}{% endblock %}
{% block title %}<img src="{{ item_type|icon_url:48 }}" /> New {{ item_type }}{% endblock %}
{% block content %}

<script type="text/javascript" src="/static/javascripts/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
  {% ifequal item_type "HtmlDocument" %}
  mode: "textareas",
  theme: "simple"
  {% else %}
  {% endifequal %}
});
</script>    

<div class="crumbs">
    {% for inherited_item_type in item_type_inheritance %}
    <a href="/resource/{{ inherited_item_type|lower }}">{{ inherited_item_type }}s</a>
    &raquo;
    {% endfor %}
    New
</div>

<div>
    {% if redirect %}
    <form method="post" enctype="multipart/form-data" action="/resource/{{ item_type|lower }}/create?redirect={{ redirect|urlencode }}" class="item_form">
    {% else %}
    <form method="post" enctype="multipart/form-data" action="/resource/{{ item_type|lower }}/create" class="item_form">
    {% endif %}
        <table>
            <tr>
                <th>
                    <label for="id_item_type">Item Type:</label>
                </th>
                <td>
                    <select id="id_item_type" name="item_type" onchange="window.location = this.value;">
                        {% for model_name in model_names %}
                        {% ifequal model_name item_type %}
                        <option value="/resource/{{ model_name|lower }}/new" selected="selected">{{ model_name }}</option>
                        {% else %}
                        <option value="/resource/{{ model_name|lower }}/new">{{ model_name }}</option>
                        {% endifequal %}
                        {% endfor %}
                    </select>
                </td>
            </tr>
            {{ form.as_table }}
        </table>
        <input type="submit" />
    </form>
</div>

{% endblock content %}

